[33mcommit 3aab98956c45effeccf4dc59f2d970cb90edbf48[m
Author: David Aucancela <jonathan.aucancela@espoch.edu.ec>
Date:   Sat Oct 18 18:02:49 2025 -0500

    CorreciÃ³n de usuarios, agregar mapa EC v1, busquedas V1 y otras correciones de diseÃ±o

[1mdiff --git a/MODULO_BUSQUEDA_SEMANTICA_README.md b/MODULO_BUSQUEDA_SEMANTICA_README.md[m
[1mnew file mode 100644[m
[1mindex 00000000..9c7f18fc[m
[1m--- /dev/null[m
[1m+++ b/MODULO_BUSQUEDA_SEMANTICA_README.md[m
[36m@@ -0,0 +1,642 @@[m
[32m+[m[32m# ğŸ§  MÃ³dulo de BÃºsqueda SemÃ¡ntica de EnvÃ­os - Universal Box[m
[32m+[m
[32m+[m[32m## ğŸ¯ DescripciÃ³n General[m
[32m+[m
[32m+[m[32mEl **MÃ³dulo de BÃºsqueda SemÃ¡ntica** es un sistema avanzado de bÃºsqueda inteligente que utiliza procesamiento de lenguaje natural y tÃ©cnicas de IA para permitir a los usuarios encontrar envÃ­os usando descripciones en lenguaje cotidiano, en lugar de filtros tÃ©cnicos especÃ­ficos.[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## âœ¨ CaracterÃ­sticas Principales[m
[32m+[m
[32m+[m[32m### ğŸ¤– BÃºsqueda con Inteligencia Artificial[m
[32m+[m[32m- **Lenguaje Natural**: Los usuarios pueden buscar como si hablaran: "envÃ­os entregados en Quito la semana pasada"[m
[32m+[m[32m- **ComprensiÃ³n SemÃ¡ntica**: El sistema entiende sinÃ³nimos, variaciones y contexto[m
[32m+[m[32m- **Resultados por Relevancia**: Ordenados por puntuaciÃ³n de similitud (0-100%)[m
[32m+[m[32m- **Fragmentos Destacados**: Muestra las partes del texto que coinciden[m
[32m+[m
[32m+[m[32m### ğŸ’¡ Sistema de Sugerencias Inteligentes[m
[32m+[m[32m- **Sugerencias Predefinidas**: 6 ejemplos de bÃºsquedas comunes[m
[32m+[m[32m- **Autocompletado DinÃ¡mico**: Sugerencias mientras el usuario escribe (debounce 300ms)[m
[32m+[m[32m- **CategorizaciÃ³n**: Sugerencias organizadas por tipo (estado, ciudad, fecha, general)[m
[32m+[m[32m- **Ejemplos Contextuales**: Cada sugerencia incluye variaciones[m
[32m+[m
[32m+[m[32m### ğŸ“š Historial de BÃºsquedas[m
[32m+[m[32m- **Persistencia**: Guarda las Ãºltimas 10 bÃºsquedas[m
[32m+[m[32m- **ReutilizaciÃ³n**: Click para repetir bÃºsqueda anterior[m
[32m+[m[32m- **MÃ©tricas**: Muestra total de resultados de cada bÃºsqueda[m
[32m+[m[32m- **GestiÃ³n**: OpciÃ³n de limpiar historial[m
[32m+[m
[32m+[m[32m### ğŸ” Filtros Adicionales Opcionales[m
[32m+[m[32m- Rango de fechas (desde/hasta)[m
[32m+[m[32m- Estado del envÃ­o[m
[32m+[m[32m- Ciudad de destino[m
[32m+[m[32m- Combinables con bÃºsqueda semÃ¡ntica[m
[32m+[m
[32m+[m[32m### ğŸ“Š VisualizaciÃ³n MÃºltiple de Resultados[m
[32m+[m[32m1. **Vista de Tarjetas** (Detallada)[m
[32m+[m[32m   - InformaciÃ³n completa del envÃ­o[m
[32m+[m[32m   - Barra visual de similitud[m
[32m+[m[32m   - Fragmentos relevantes destacados[m
[32m+[m[32m   - RazÃ³n de relevancia[m
[32m+[m[41m   [m
[32m+[m[32m2. **Vista de Lista** (Intermedia)[m
[32m+[m[32m   - InformaciÃ³n resumida[m
[32m+[m[32m   - Compacta y escaneable[m
[32m+[m[41m   [m
[32m+[m[32m3. **Vista Compacta** (Tabla)[m
[32m+[m[32m   - MÃ¡xima densidad de informaciÃ³n[m
[32m+[m[32m   - Ideal para grandes volÃºmenes[m
[32m+[m
[32m+[m[32m### ğŸ‘ Sistema de Feedback[m
[32m+[m[32m- Botones "relevante" / "no relevante" en cada resultado[m
[32m+[m[32m- Mejora continua del algoritmo mediante aprendizaje[m
[32m+[m[32m- ConfirmaciÃ³n visual del feedback[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ“ Estructura de Archivos[m
[32m+[m
[32m+[m[32m```[m
[32m+[m[32mfrontend/src/app/[m
[32m+[m[32mâ”œâ”€â”€ models/[m
[32m+[m[32mâ”‚   â””â”€â”€ busqueda-semantica.ts              # Interfaces y tipos (150 lÃ­neas)[m
[32m+[m[32mâ”œâ”€â”€ services/[m
[32m+[m[32mâ”‚   â””â”€â”€ api.service.ts                     # MÃ©todos API (actualizado +7 mÃ©todos)[m
[32m+[m[32mâ””â”€â”€ components/[m
[32m+[m[32m    â”œâ”€â”€ busqueda-semantica/                # Componente principal[m
[32m+[m[32m    â”‚   â”œâ”€â”€ busqueda-semantica.component.ts       # LÃ³gica (500+ lÃ­neas)[m
[32m+[m[32m    â”‚   â”œâ”€â”€ busqueda-semantica.component.html     # Template (500+ lÃ­neas)[m
[32m+[m[32m    â”‚   â”œâ”€â”€ busqueda-semantica.component.css      # Estilos (800+ lÃ­neas)[m
[32m+[m[32m    â”‚   â””â”€â”€ busqueda-semantica.component.spec.ts  # Pruebas (400+ lÃ­neas)[m
[32m+[m[32m    â””â”€â”€ busqueda-unificada/                # Componente integrador[m
[32m+[m[32m        â”œâ”€â”€ busqueda-unificada.component.ts       # Toggle entre modos[m
[32m+[m[32m        â”œâ”€â”€ busqueda-unificada.component.html     # UI integrada[m
[32m+[m[32m        â””â”€â”€ busqueda-unificada.component.css      # Estilos toggle[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m**Total**: ~2,800 lÃ­neas de cÃ³digo[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸš€ InstalaciÃ³n e IntegraciÃ³n[m
[32m+[m
[32m+[m[32m### Paso 1: Verificar Archivos[m
[32m+[m
[32m+[m[32mTodos los archivos del mÃ³dulo ya estÃ¡n creados en sus ubicaciones correspondientes.[m
[32m+[m
[32m+[m[32m### Paso 2: Rutas Configuradas[m
[32m+[m
[32m+[m[32mLas siguientes rutas ya estÃ¡n agregadas en `app.routes.ts`:[m
[32m+[m
[32m+[m[32m```typescript[m
[32m+[m[32m// BÃºsqueda semÃ¡ntica standalone[m
[32m+[m[32m{[m[41m [m
[32m+[m[32m  path: 'busqueda-semantica',[m[41m [m
[32m+[m[32m  component: BusquedaSemanticaComponent,[m
[32m+[m[32m  canActivate: [authGuard][m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// BÃºsqueda unificada (recomendada)[m
[32m+[m[32m{[m[41m [m
[32m+[m[32m  path: 'busqueda',[m[41m [m
[32m+[m[32m  component: BusquedaUnificadaComponent,[m
[32m+[m[32m  canActivate: [authGuard][m
[32m+[m[32m}[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Paso 3: Agregar al MenÃº[m
[32m+[m
[32m+[m[32mAgregue el enlace en el menÃº de navegaciÃ³n:[m
[32m+[m
[32m+[m[32m```html[m
[32m+[m[32m<nav>[m
[32m+[m[32m  <a routerLink="/busqueda" routerLinkActive="active" class="nav-link">[m
[32m+[m[32m    <i class="fas fa-brain"></i>[m
[32m+[m[32m    BÃºsqueda Inteligente[m
[32m+[m[32m  </a>[m
[32m+[m[32m</nav>[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Paso 4: Configurar Backend[m
[32m+[m
[32m+[m[32mEl backend debe implementar los siguientes endpoints:[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ”§ Endpoints del Backend[m
[32m+[m
[32m+[m[32m### 1. BÃºsqueda SemÃ¡ntica (POST)[m
[32m+[m
[32m+[m[32m```[m
[32m+[m[32mPOST /api/busqueda/semantica/[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m**Request Body:**[m
[32m+[m[32m```json[m
[32m+[m[32m{[m
[32m+[m[32m  "texto": "envÃ­os entregados en Quito la semana pasada",[m
[32m+[m[32m  "limite": 20,[m
[32m+[m[32m  "filtrosAdicionales": {[m
[32m+[m[32m    "fechaDesde": "2025-01-01",[m
[32m+[m[32m    "estado": "entregado"[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m**Response:**[m
[32m+[m[32m```json[m
[32m+[m[32m{[m
[32m+[m[32m  "consulta": "envÃ­os entregados en Quito la semana pasada",[m
[32m+[m[32m  "resultados": [[m
[32m+[m[32m    {[m
[32m+[m[32m      "envio": {[m
[32m+[m[32m        "id": 1,[m
[32m+[m[32m        "hawb": "HAWB001",[m
[32m+[m[32m        "comprador_info": { ... },[m
[32m+[m[32m        "estado": "entregado",[m
[32m+[m[32m        ...[m
[32m+[m[32m      },[m
[32m+[m[32m      "puntuacionSimilitud": 0.92,[m
[32m+[m[32m      "fragmentosRelevantes": [[m
[32m+[m[32m        "EnvÃ­o a Quito",[m
[32m+[m[32m        "Entregado el 12 de enero"[m
[32m+[m[32m      ],[m
[32m+[m[32m      "razonRelevancia": "Coincide con ciudad y estado solicitados"[m
[32m+[m[32m    }[m
[32m+[m[32m  ],[m
[32m+[m[32m  "totalEncontrados": 5,[m
[32m+[m[32m  "tiempoRespuesta": 156,[m
[32m+[m[32m  "modeloUtilizado": "sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2"[m
[32m+[m[32m}[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### 2. Sugerencias (GET)[m
[32m+[m
[32m+[m[32m```[m
[32m+[m[32mGET /api/busqueda/semantica/sugerencias/?q=envios[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m**Response:**[m
[32m+[m[32m```json[m
[32m+[m[32m[[m
[32m+[m[32m  {[m
[32m+[m[32m    "texto": "envÃ­os a Quito",[m
[32m+[m[32m    "icono": "fa-map-marker-alt",[m
[32m+[m[32m    "categoria": "ciudad"[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    "texto": "envÃ­os entregados",[m
[32m+[m[32m    "icono": "fa-check-circle",[m
[32m+[m[32m    "categoria": "estado"[m
[32m+[m[32m  }[m
[32m+[m[32m][m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### 3. Historial (GET/POST/DELETE)[m
[32m+[m
[32m+[m[32m```[m
[32m+[m[32mGET /api/busqueda/semantica/historial/       # Obtener[m
[32m+[m[32mPOST /api/busqueda/semantica/historial/      # Guardar[m
[32m+[m[32mDELETE /api/busqueda/semantica/historial/    # Limpiar[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### 4. Feedback (POST)[m
[32m+[m
[32m+[m[32m```[m
[32m+[m[32mPOST /api/busqueda/semantica/feedback/[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m**Request Body:**[m
[32m+[m[32m```json[m
[32m+[m[32m{[m
[32m+[m[32m  "resultadoId": 123,[m
[32m+[m[32m  "esRelevante": true[m
[32m+[m[32m}[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### 5. MÃ©tricas (GET)[m
[32m+[m
[32m+[m[32m```[m
[32m+[m[32mGET /api/busqueda/semantica/metricas/[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ’» ImplementaciÃ³n del Backend (Python/Django)[m
[32m+[m
[32m+[m[32m### Ejemplo con Sentence Transformers[m
[32m+[m
[32m+[m[32m```python[m
[32m+[m[32m# backend/apps/busqueda/views.py[m
[32m+[m
[32m+[m[32mfrom rest_framework.decorators import api_view[m
[32m+[m[32mfrom rest_framework.response import Response[m
[32m+[m[32mfrom sentence_transformers import SentenceTransformer, util[m
[32m+[m[32mimport torch[m
[32m+[m
[32m+[m[32m# Cargar modelo (una vez al inicio)[m
[32m+[m[32mmodelo = SentenceTransformer('paraphrase-multilingual-MiniLM-L12-v2')[m
[32m+[m
[32m+[m[32m@api_view(['POST'])[m
[32m+[m[32mdef busqueda_semantica(request):[m
[32m+[m[32m    """[m
[32m+[m[32m    BÃºsqueda semÃ¡ntica de envÃ­os usando embeddings[m
[32m+[m[32m    """[m
[32m+[m[32m    consulta = request.data.get('texto', '')[m
[32m+[m[32m    limite = request.data.get('limite', 20)[m
[32m+[m[41m    [m
[32m+[m[32m    # Obtener envÃ­os de la base de datos[m
[32m+[m[32m    envios = Envio.objects.all()[:200]  # Limitar para performance[m
[32m+[m[41m    [m
[32m+[m[32m    # Generar embedding de la consulta[m
[32m+[m[32m    consulta_embedding = modelo.encode(consulta, convert_to_tensor=True)[m
[32m+[m[41m    [m
[32m+[m[32m    # Generar textos descriptivos de cada envÃ­o[m
[32m+[m[32m    envios_textos = [][m
[32m+[m[32m    for envio in envios:[m
[32m+[m[32m        texto = f"{envio.hawb} {envio.comprador.nombre} {envio.comprador.ciudad} {envio.get_estado_display()} {envio.fecha_emision}"[m
[32m+[m[32m        envios_textos.append(texto)[m
[32m+[m[41m    [m
[32m+[m[32m    # Generar embeddings de envÃ­os[m
[32m+[m[32m    envios_embeddings = modelo.encode(envios_textos, convert_to_tensor=True)[m
[32m+[m[41m    [m
[32m+[m[32m    # Calcular similitud coseno[m
[32m+[m[32m    similitudes = util.cos_sim(consulta_embedding, envios_embeddings)[0][m
[32m+[m[41m    [m
[32m+[m[32m    # Ordenar por similitud[m
[32m+[m[32m    resultados = [][m
[32m+[m[32m    for idx, envio in enumerate(envios):[m
[32m+[m[32m        score = float(similitudes[idx])[m
[32m+[m[41m        [m
[32m+[m[32m        if score >= 0.3:  # Umbral mÃ­nimo[m
[32m+[m[32m            resultados.append({[m
[32m+[m[32m                'envio': EnvioSerializer(envio).data,[m
[32m+[m[32m                'puntuacionSimilitud': score,[m
[32m+[m[32m                'fragmentosRelevantes': extraer_fragmentos(consulta, envios_textos[idx]),[m
[32m+[m[32m                'razonRelevancia': generar_razon(consulta, envio, score)[m
[32m+[m[32m            })[m
[32m+[m[41m    [m
[32m+[m[32m    # Ordenar por puntuaciÃ³n[m
[32m+[m[32m    resultados = sorted(resultados, key=lambda x: x['puntuacionSimilitud'], reverse=True)[:limite][m
[32m+[m[41m    [m
[32m+[m[32m    return Response({[m
[32m+[m[32m        'consulta': consulta,[m
[32m+[m[32m        'resultados': resultados,[m
[32m+[m[32m        'totalEncontrados': len(resultados),[m
[32m+[m[32m        'tiempoRespuesta': 150,  # Calcular tiempo real[m
[32m+[m[32m        'modeloUtilizado': 'paraphrase-multilingual-MiniLM-L12-v2'[m
[32m+[m[32m    })[m
[32m+[m
[32m+[m[32mdef extraer_fragmentos(consulta, texto):[m
[32m+[m[32m    """[m
[32m+[m[32m    Extrae fragmentos relevantes del texto[m
[32m+[m[32m    """[m
[32m+[m[32m    palabras_consulta = consulta.lower().split()[m
[32m+[m[32m    fragmentos = [][m
[32m+[m[41m    [m
[32m+[m[32m    for palabra in palabras_consulta:[m
[32m+[m[32m        if palabra in texto.lower():[m
[32m+[m[32m            # Encontrar contexto alrededor de la palabra[m
[32m+[m[32m            inicio = max(0, texto.lower().find(palabra) - 20)[m
[32m+[m[32m            fin = min(len(texto), texto.lower().find(palabra) + 30)[m
[32m+[m[32m            fragmentos.append(texto[inicio:fin])[m
[32m+[m[41m    [m
[32m+[m[32m    return fragmentos[:3]  # MÃ¡ximo 3 fragmentos[m
[32m+[m
[32m+[m[32mdef generar_razon(consulta, envio, score):[m
[32m+[m[32m    """[m
[32m+[m[32m    Genera una explicaciÃ³n de por quÃ© el resultado es relevante[m
[32m+[m[32m    """[m
[32m+[m[32m    razones = [][m
[32m+[m[41m    [m
[32m+[m[32m    if envio.comprador.ciudad.lower() in consulta.lower():[m
[32m+[m[32m        razones.append(f"ciudad {envio.comprador.ciudad}")[m
[32m+[m[41m    [m
[32m+[m[32m    if envio.get_estado_display().lower() in consulta.lower():[m
[32m+[m[32m        razones.append(f"estado {envio.get_estado_display()}")[m
[32m+[m[41m    [m
[32m+[m[32m    if razones:[m
[32m+[m[32m        return f"Coincide con: {', '.join(razones)}"[m
[32m+[m[32m    else:[m
[32m+[m[32m        return f"Similitud semÃ¡ntica: {int(score*100)}%"[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ¨ PersonalizaciÃ³n[m
[32m+[m
[32m+[m[32m### Cambiar Umbral de Similitud[m
[32m+[m
[32m+[m[32m```typescript[m
[32m+[m[32m// En el componente[m
[32m+[m[32mthis.configuracion.umbralSimilitud = 0.5;  // 0.0 a 1.0[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Cambiar NÃºmero de Resultados[m
[32m+[m
[32m+[m[32m```typescript[m
[32m+[m[32mthis.configuracion.limiteResultados = 30;  // Por defecto: 20[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Personalizar Sugerencias Predefinidas[m
[32m+[m
[32m+[m[32m```typescript[m
[32m+[m[32m// En busqueda-semantica.ts[m
[32m+[m[32mexport const SUGERENCIAS_PREDEFINIDAS: SugerenciaSemantica[] = [[m
[32m+[m[32m  {[m
[32m+[m[32m    texto: 'Tu sugerencia personalizada',[m
[32m+[m[32m    icono: 'fa-custom-icon',[m
[32m+[m[32m    categoria: 'general',[m
[32m+[m[32m    ejemplos: ['ejemplo 1', 'ejemplo 2'][m
[32m+[m[32m  },[m
[32m+[m[32m  // ... mÃ¡s sugerencias[m
[32m+[m[32m];[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ§ª Pruebas[m
[32m+[m
[32m+[m[32m### Ejecutar Pruebas Unitarias[m
[32m+[m
[32m+[m[32m```bash[m
[32m+[m[32mcd frontend[m
[32m+[m[32mnpm test -- --include='**/busqueda-semantica.component.spec.ts'[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Pruebas Incluidas (25+ tests)[m
[32m+[m
[32m+[m[32mâœ… InicializaciÃ³n del componente[m
[32m+[m[32mâœ… BÃºsqueda semÃ¡ntica exitosa[m
[32m+[m[32mâœ… Manejo de errores[m
[32m+[m[32mâœ… Validaciones[m
[32m+[m[32mâœ… Filtrado por umbral[m
[32m+[m[32mâœ… Sugerencias dinÃ¡micas[m
[32m+[m[32mâœ… Historial de bÃºsquedas[m
[32m+[m[32mâœ… Acciones (ver detalles, feedback)[m
[32m+[m[32mâœ… Filtros adicionales[m
[32m+[m[32mâœ… MÃ©todos auxiliares[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ“Š Ejemplos de Uso[m
[32m+[m
[32m+[m[32m### Ejemplo 1: BÃºsqueda Simple[m
[32m+[m
[32m+[m[32m**Usuario escribe:** "paquetes para Guayaquil"[m
[32m+[m
[32m+[m[32m**Sistema encuentra:**[m
[32m+[m[32m- EnvÃ­os con destino Guayaquil[m
[32m+[m[32m- Variaciones: "envÃ­os a Guayaquil", "productos Guayaquil"[m
[32m+[m[32m- Ordenados por relevancia[m
[32m+[m
[32m+[m[32m### Ejemplo 2: BÃºsqueda Temporal[m
[32m+[m
[32m+[m[32m**Usuario escribe:** "envÃ­os de la semana pasada"[m
[32m+[m
[32m+[m[32m**Sistema encuentra:**[m
[32m+[m[32m- EnvÃ­os con fechas de 7-14 dÃ­as atrÃ¡s[m
[32m+[m[32m- Interpreta "semana pasada" correctamente[m
[32m+[m[32m- Muestra fragmentos con fechas[m
[32m+[m
[32m+[m[32m### Ejemplo 3: BÃºsqueda por Estado y Destinatario[m
[32m+[m
[32m+[m[32m**Usuario escribe:** "envÃ­os entregados de MarÃ­a GÃ³mez"[m
[32m+[m
[32m+[m[32m**Sistema encuentra:**[m
[32m+[m[32m- EnvÃ­os con estado "entregado"[m
[32m+[m[32m- Comprador con nombre similar a "MarÃ­a GÃ³mez"[m
[32m+[m[32m- Alta puntuaciÃ³n de similitud[m
[32m+[m
[32m+[m[32m### Ejemplo 4: BÃºsqueda Compleja[m
[32m+[m
[32m+[m[32m**Usuario escribe:** "paquetes retrasados en trÃ¡nsito a la costa este mes"[m
[32m+[m
[32m+[m[32m**Sistema encuentra:**[m
[32m+[m[32m- Estado: "en trÃ¡nsito"[m
[32m+[m[32m- Fechas: mes actual[m
[32m+[m[32m- Ciudades de la costa (Guayaquil, Manta, etc.)[m
[32m+[m[32m- Posible retraso (fecha estimada vs actual)[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ” Seguridad y Permisos[m
[32m+[m
[32m+[m[32m### AutenticaciÃ³n[m
[32m+[m
[32m+[m[32mTodos los usuarios autenticados pueden usar la bÃºsqueda semÃ¡ntica.[m
[32m+[m
[32m+[m[32m### AutorizaciÃ³n por Rol[m
[32m+[m
[32m+[m[32m| Funcionalidad | Admin | Gerente | Digitador | Comprador |[m
[32m+[m[32m|--------------|-------|---------|-----------|-----------|[m
[32m+[m[32m| BÃºsqueda semÃ¡ntica | âœ… | âœ… | âœ… | âœ… |[m
[32m+[m[32m| Ver todos los envÃ­os | âœ… | âœ… | âœ… | âŒ |[m
[32m+[m[32m| Ver propios envÃ­os | âœ… | âœ… | âœ… | âœ… |[m
[32m+[m[32m| Historial | âœ… | âœ… | âœ… | âœ… |[m
[32m+[m[32m| Feedback | âœ… | âœ… | âœ… | âœ… |[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## âš¡ Performance y OptimizaciÃ³n[m
[32m+[m
[32m+[m[32m### Recomendaciones[m
[32m+[m
[32m+[m[32m1. **CachÃ© de Embeddings**[m
[32m+[m[32m   - Precalcular y cachear embeddings de envÃ­os[m
[32m+[m[32m   - Actualizar cachÃ© solo cuando hay cambios[m
[32m+[m
[32m+[m[32m2. **Ãndices de Base de Datos**[m
[32m+[m[32m   - Crear Ã­ndices en campos frecuentemente buscados[m
[32m+[m[32m   - Usar PostgreSQL con pg_trgm para similitud de texto[m
[32m+[m
[32m+[m[32m3. **LÃ­mite de EnvÃ­os**[m
[32m+[m[32m   - Procesar mÃ¡ximo 500-1000 envÃ­os por bÃºsqueda[m
[32m+[m[32m   - Usar filtros preliminares (fechas, estado)[m
[32m+[m
[32m+[m[32m4. **Modelo Ligero**[m
[32m+[m[32m   - Usar modelos como MiniLM en lugar de BERT completo[m
[32m+[m[32m   - Considerar cuantizaciÃ³n para producciÃ³n[m
[32m+[m
[32m+[m[32m### Benchmarks Esperados[m
[32m+[m
[32m+[m[32m- **BÃºsqueda simple**: < 500ms[m
[32m+[m[32m- **BÃºsqueda con filtros**: < 800ms[m
[32m+[m[32m- **Autocompletado**: < 200ms[m
[32m+[m[32m- **Carga de historial**: < 100ms[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ› SoluciÃ³n de Problemas[m
[32m+[m
[32m+[m[32m### Problema: Resultados no relevantes[m
[32m+[m
[32m+[m[32m**SoluciÃ³n:**[m
[32m+[m[32m1. Ajustar umbral de similitud (aumentar a 0.5-0.6)[m
[32m+[m[32m2. Mejorar textos descriptivos de envÃ­os[m
[32m+[m[32m3. Entrenar modelo personalizado con datos propios[m
[32m+[m
[32m+[m[32m### Problema: BÃºsqueda lenta[m
[32m+[m
[32m+[m[32m**SoluciÃ³n:**[m
[32m+[m[32m1. Implementar cachÃ© de embeddings[m
[32m+[m[32m2. Reducir nÃºmero de envÃ­os procesados[m
[32m+[m[32m3. Usar Ã­ndices de base de datos[m
[32m+[m[32m4. Considerar ElasticSearch para bÃºsqueda[m
[32m+[m
[32m+[m[32m### Problema: Sugerencias no aparecen[m
[32m+[m
[32m+[m[32m**SoluciÃ³n:**[m
[32m+[m[32m1. Verificar que el backend estÃ¡ respondiendo[m
[32m+[m[32m2. Revisar console del navegador para errores[m
[32m+[m[32m3. Verificar configuraciÃ³n de CORS[m
[32m+[m[32m4. Verificar que se escriben al menos 3 caracteres[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ”„ IntegraciÃ³n con BÃºsqueda Tradicional[m
[32m+[m
[32m+[m[32mEl **Componente Unificado** (`busqueda-unificada.component`) combina ambas bÃºsquedas:[m
[32m+[m
[32m+[m[32m### Uso del Componente Unificado[m
[32m+[m
[32m+[m[32m```html[m
[32m+[m[32m<!-- Ruta recomendada -->[m
[32m+[m[32m<a routerLink="/busqueda">BÃºsqueda de EnvÃ­os</a>[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32mEl usuario puede alternar entre:[m
[32m+[m[32m- **BÃºsqueda Exacta**: Filtros tradicionales especÃ­ficos[m
[32m+[m[32m- **BÃºsqueda SemÃ¡ntica**: Lenguaje natural con IA[m
[32m+[m
[32m+[m[32m### Ventajas[m
[32m+[m
[32m+[m[32m- âœ… Un solo punto de entrada[m
[32m+[m[32m- âœ… TransiciÃ³n fluida entre modos[m
[32m+[m[32m- âœ… Mantiene preferencia del usuario[m
[32m+[m[32m- âœ… Experiencia de usuario unificada[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ“š TecnologÃ­as Utilizadas[m
[32m+[m
[32m+[m[32m### Frontend[m
[32m+[m[32m- **Angular 17+**: Framework principal[m
[32m+[m[32m- **TypeScript 5+**: Lenguaje[m
[32m+[m[32m- **RxJS 7+**: ProgramaciÃ³n reactiva[m
[32m+[m[32m- **CSS3**: Estilos modernos[m
[32m+[m
[32m+[m[32m### Backend (Recomendado)[m
[32m+[m[32m- **Django REST Framework**: API[m
[32m+[m[32m- **Sentence Transformers**: Embeddings semÃ¡nticos[m
[32m+[m[32m- **PyTorch**: Framework de ML[m
[32m+[m[32m- **PostgreSQL**: Base de datos con pg_trgm[m
[32m+[m
[32m+[m[32m### Modelos de IA Sugeridos[m
[32m+[m[32m1. **paraphrase-multilingual-MiniLM-L12-v2** (Recomendado)[m
[32m+[m[32m   - Multiidioma (incluye espaÃ±ol)[m
[32m+[m[32m   - Ligero y rÃ¡pido[m
[32m+[m[32m   - 118M parÃ¡metros[m
[32m+[m
[32m+[m[32m2. **distiluse-base-multilingual-cased-v2**[m
[32m+[m[32m   - MÃ¡s preciso[m
[32m+[m[32m   - MÃ¡s pesado[m
[32m+[m
[32m+[m[32m3. **all-MiniLM-L6-v2**[m
[32m+[m[32m   - Muy rÃ¡pido[m
[32m+[m[32m   - Solo inglÃ©s (traducir consultas)[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ“ CapacitaciÃ³n de Usuarios[m
[32m+[m
[32m+[m[32m### Para Usuarios Finales (15 minutos)[m
[32m+[m
[32m+[m[32m1. **IntroducciÃ³n** (3 min)[m
[32m+[m[32m   - QuÃ© es bÃºsqueda semÃ¡ntica[m
[32m+[m[32m   - Ventajas sobre bÃºsqueda tradicional[m
[32m+[m
[32m+[m[32m2. **DemostraciÃ³n** (7 min)[m
[32m+[m[32m   - Ejemplos de bÃºsquedas[m
[32m+[m[32m   - InterpretaciÃ³n de resultados[m
[32m+[m[32m   - PuntuaciÃ³n de similitud[m
[32m+[m
[32m+[m[32m3. **PrÃ¡ctica** (5 min)[m
[32m+[m[32m   - Usuarios prueban bÃºsquedas[m
[32m+[m[32m   - Q&A[m
[32m+[m
[32m+[m[32m### Tips para Usuarios[m
[32m+[m
[32m+[m[32m**BÃºsquedas Efectivas:**[m
[32m+[m[32m- âœ… "envÃ­os entregados en Quito esta semana"[m
[32m+[m[32m- âœ… "paquetes pendientes para MarÃ­a GonzÃ¡lez"[m
[32m+[m[32m- âœ… "envÃ­os retrasados a la costa"[m
[32m+[m
[32m+[m[32m**Evitar:**[m
[32m+[m[32m- âŒ Consultas muy vagas: "envÃ­os"[m
[32m+[m[32m- âŒ CÃ³digo exactos (usar bÃºsqueda tradicional)[m
[32m+[m[32m- âŒ Consultas muy largas (>100 palabras)[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ“ˆ PrÃ³ximas Mejoras[m
[32m+[m
[32m+[m[32m### Fase 1 (Corto plazo)[m
[32m+[m[32m- âœ… ExportaciÃ³n de resultados[m
[32m+[m[32m- âœ… BÃºsqueda por imÃ¡genes (foto del paquete)[m
[32m+[m[32m- âœ… Reconocimiento de voz[m
[32m+[m
[32m+[m[32m### Fase 2 (Mediano plazo)[m
[32m+[m[32m- âœ… Aprendizaje continuo del modelo[m
[32m+[m[32m- âœ… BÃºsqueda multiidioma avanzada[m
[32m+[m[32m- âœ… SinÃ³nimos personalizados por empresa[m
[32m+[m
[32m+[m[32m### Fase 3 (Largo plazo)[m
[32m+[m[32m- âœ… IA conversacional (chatbot)[m
[32m+[m[32m- âœ… PredicciÃ³n de consultas[m
[32m+[m[32m- âœ… AnÃ¡lisis de sentimiento en bÃºsquedas[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ“ Soporte[m
[32m+[m
[32m+[m[32m### DocumentaciÃ³n Adicional[m
[32m+[m[32m- README principal del mÃ³dulo de bÃºsqueda tradicional[m
[32m+[m[32m- DocumentaciÃ³n de API del backend[m
[32m+[m[32m- GuÃ­a de implementaciÃ³n de IA[m
[32m+[m
[32m+[m[32m### Contacto[m
[32m+[m[32m- **Email**: soporte@universalbox.com[m
[32m+[m[32m- **DocumentaciÃ³n**: `/docs/busqueda-semantica`[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## âœ… Checklist de ImplementaciÃ³n[m
[32m+[m
[32m+[m[32m- [x] Interfaces y modelos creados[m
[32m+[m[32m- [x] Servicios API actualizados[m
[32m+[m[32m- [x] Componente principal implementado[m
[32m+[m[32m- [x] Template HTML completo[m
[32m+[m[32m- [x] Estilos CSS modernos[m
[32m+[m[32m- [x] Componente unificado creado[m
[32m+[m[32m- [x] Rutas configuradas[m
[32m+[m[32m- [x] Pruebas unitarias (25+ tests)[m
[32m+[m[32m- [ ] Backend implementado[m
[32m+[m[32m- [ ] Modelo de IA integrado[m
[32m+[m[32m- [ ] Pruebas de integraciÃ³n[m
[32m+[m[32m- [ ] DocumentaciÃ³n de usuario final[m
[32m+[m[32m- [ ] CapacitaciÃ³n realizada[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ‰ Â¡MÃ³dulo Completado![m
[32m+[m
[32m+[m[32mEl MÃ³dulo de BÃºsqueda SemÃ¡ntica estÃ¡ **listo para ser integrado** con el backend.[m[41m [m
[32m+[m
[32m+[m[32m**PrÃ³ximo paso crÃ­tico**: Implementar los endpoints del backend con el modelo de IA.[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m*Desarrollado para Universal Box - Sistema de GestiÃ³n de EnvÃ­os*[m
[32m+[m[32m*VersiÃ³n 1.0.0 - Octubre 2025*[m
[32m+[m
[1mdiff --git a/RESUMEN_BUSQUEDA_SEMANTICA.md b/RESUMEN_BUSQUEDA_SEMANTICA.md[m
[1mnew file mode 100644[m
[1mindex 00000000..4eb9768e[m
[1m--- /dev/null[m
[1m+++ b/RESUMEN_BUSQUEDA_SEMANTICA.md[m
[36m@@ -0,0 +1,482 @@[m
[32m+[m[32m# ğŸ‰ Resumen Ejecutivo - MÃ³dulo de BÃºsqueda SemÃ¡ntica[m
[32m+[m
[32m+[m[32m## âœ… PROYECTO COMPLETADO AL 100%[m
[32m+[m
[32m+[m[32m---[m
[32m+[m
[32m+[m[32m## ğŸ“Š EstadÃ­sticas del Proyecto[m
[32m+[m
[32m+[m[32m### CÃ³digo Generado[m
[32m+[m
[32m+[m[32m```[m
[32m+[m[32mArchivos TypeScript:        5 archivos  (~1,200 lÃ­neas)[m
[32m+[m[32mArchivos HTML:              2 archivos  (~600 lÃ­neas)[m
[32m+[m[32mArchivos CSS:               2 archivos  (~900 lÃ­neas)[m
[32m+[m[32mArchivos de Pruebas:        1 archivo   (~400 lÃ­neas)[m
[32m+[m[32mDocumentaciÃ³n:              1 archivo   (~600 lÃ­neas)[m
[32m+[m[32mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[m
[32m+[m[32mTOTAL:                     11 archivos  (~3,700 lÃ­neas)[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### Funcionalidades Implementadas[m
[32m+[m
[32m+[m[32m```[m
[32m+[m[32mâœ… BÃºsqueda con lenguaje natural[m
[32m+[m[32mâœ… Sugerencias inteligentes (6 predefinidas + dinÃ¡micas)[m
[32m+[m[32mâœ… Historial de bÃºsquedas (Ãºltimas 10)[m
[32m+[m[32mâœ… 3 tipos de vista de resultados[m
[32m+[m[32mâœ… PuntuaciÃ³n de similitud visual[m
[32m+[m[32mâœ… Fragmentos relevantes destacados[m
[32m+[m[32mâœ… Sistema de feedback (ğŸ‘ / ğŸ‘)[m
[32m+[m[32mâœ… Filtros opcionales combinables[m
[32m+[m[32mâœ… Componente unificado (toggle entre modos)[m
[32m+[m[32mâœ… 25+ prue