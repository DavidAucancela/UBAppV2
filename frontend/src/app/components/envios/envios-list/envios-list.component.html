<div class="envios-container">
  <!-- Header -->
  <div class="envios-header">
    <div class="container">
      <div class="header-content">
        <div class="header-icon">
          <i class="fas fa-truck"></i>
        </div>
        <div class="header-text">
          <h1>Gesti√≥n de Env√≠os</h1>
          <p>Administra y gestiona todos los env√≠os del sistema</p>
        </div>
        <button 
          class="btn btn-primary btn-header"
          (click)="openCreateModal()"
          *ngIf="authService.canManageEnvios()"
        >
          <i class="fas fa-plus"></i>
          Nuevo Env√≠o
        </button>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container">
    <div class="envios-content">
      <!-- Filters Card -->
      <div class="card">
        <div class="card-header-filters">
          <h3>
            <i class="fas fa-filter"></i>
            Filtros de B√∫squeda
          </h3>
        </div>

        <!-- Filters -->
        <div class="filters-section">
      <div class="filter-row">
        <!-- Search -->
        <div class="filter-group">
          <label class="filter-label">
            <i class="fas fa-search"></i>
            Buscar
          </label>
          <input 
            type="text"
            class="form-control"
            [(ngModel)]="searchTerm"
            (input)="onSearchChange()"
            placeholder="HAWB, comprador, c√©dula..."
          >
        </div>

        <!-- Estado Filter -->
        <div class="filter-group">
          <label class="filter-label">
            <i class="fas fa-filter"></i>
            Estado
          </label>
          <select 
            class="form-control"
            [(ngModel)]="selectedEstado"
            (change)="onEstadoFilterChange()"
          >
            <option value="">Todos los estados</option>
            <option [value]="EstadosEnvio.PENDIENTE">Pendiente</option>
            <option [value]="EstadosEnvio.EN_TRANSITO">En Tr√°nsito</option>
            <option [value]="EstadosEnvio.ENTREGADO">Entregado</option>
            <option [value]="EstadosEnvio.CANCELADO">Cancelado</option>
          </select>
        </div>

        <!-- Comprador Filter -->
        <div class="filter-group" *ngIf="!authService.isComprador()">
          <label class="filter-label">
            <i class="fas fa-user"></i>
            Comprador
          </label>
          <select 
            class="form-control"
            [(ngModel)]="selectedComprador"
            (change)="onCompradorFilterChange()"
          >
            <option value="">Todos los compradores</option>
            <option *ngFor="let comprador of compradores" [value]="comprador.id">
              {{ comprador.nombre }}
            </option>
          </select>
        </div>
        </div>

        <!-- Results Summary -->
        <div class="results-summary">
          <span class="results-count">
            <i class="fas fa-list"></i>
            Mostrando {{ paginatedEnvios.length }} de {{ filteredEnvios.length }} env√≠os
          </span>
        </div>
      </div>

      <!-- Success Message -->
      <div class="alert alert-success" *ngIf="successMessage">
        <i class="fas fa-check-circle"></i>
        {{ successMessage }}
      </div>

      <!-- Error Message -->
      <div class="alert alert-error" *ngIf="errorMessage">
        <i class="fas fa-exclamation-circle"></i>
        {{ errorMessage }}
      </div>

      <!-- Loading State -->
      <div class="loading-state" *ngIf="loading">
        <i class="fas fa-spinner fa-spin"></i>
        <span>Cargando env√≠os...</span>
      </div>

      <!-- Table -->
      <div class="card" *ngIf="!loading">
    <div class="table-container">
      <table class="table">
        <thead>
          <tr>
            <th>HAWB</th>
            <th>Comprador / C√©dula</th>
            <th>Productos</th>
            <th>Peso (kg)</th>
            <th>Valor</th>
            <th>Costo Env√≠o</th>
            <th>Estado</th>
            <th>Fecha</th>
            <th>Observaciones</th>
            <th class="actions-column">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let envio of paginatedEnvios">
            <td>
              <strong class="hawb-text">{{ envio.hawb }}</strong>
            </td>
            <td>
              <div class="comprador-info">
                <span class="comprador-nombre">{{ envio.comprador_info?.nombre || 'Sin informaci√≥n' }}</span>
                <span class="comprador-cedula">{{ envio.comprador_info?.cedula || '-' }}</span>
              </div>
            </td>
            <td class="text-center">
              <span class="badge badge-info">
                {{ envio.cantidad_productos || 0 }}
              </span>
            </td>
            <td class="text-right">
              {{ envio.peso_total | number:'1.2-2' }}
            </td>
            <td class="text-right">
              {{ envio.valor_total | currency:'USD':'symbol':'1.2-2' }}
            </td>
            <td class="text-right">
              <span class="costo-servicio">{{ envio.costo_servicio || 0 | currency:'USD':'symbol':'1.2-2' }}</span>
            </td>
            <td>
              <span class="badge" [ngClass]="getEstadoClass(envio.estado)">
                {{ getEstadoLabel(envio.estado) }}
              </span>
            </td>
            <td>
              {{ envio.fecha_creacion | date:'dd/MM/yyyy' }}
            </td>
            <td class="observaciones-cell">
              <span *ngIf="envio.observaciones" class="observaciones-text" [title]="envio.observaciones">
                {{ envio.observaciones.length > 50 ? (envio.observaciones.substring(0, 50) + '...') : envio.observaciones }}
              </span>
              <span *ngIf="!envio.observaciones" class="text-muted">-</span>
            </td>
            <td class="actions-column">
              <div class="action-buttons">
                <button 
                  class="btn-icon btn-view"
                  (click)="viewEnvio(envio)"
                  title="Ver detalle"
                >
                  <i class="fas fa-eye"></i>
                </button>
                
                <button 
                  class="btn-icon btn-edit"
                  (click)="editEnvio(envio)"
                  *ngIf="canEditEnvio(envio)"
                  title="Editar"
                >
                  <i class="fas fa-edit"></i>
                </button>

                <!-- Estado dropdown -->
                <div class="dropdown-estado" *ngIf="canChangeEstado(envio)">
                  <button 
                    class="btn-icon btn-status" 
                    title="Cambiar estado"
                    (click)="toggleDropdownEstado(envio.id!, $event)"
                    type="button"
                  >
                    <i class="fas fa-exchange-alt"></i>
                  </button>
                  <div class="dropdown-estado-menu" *ngIf="isDropdownOpen(envio.id!)" (click)="$event.stopPropagation()">
                    <button 
                      (click)="cambiarEstado(envio, EstadosEnvio.PENDIENTE)"
                      [disabled]="envio.estado === EstadosEnvio.PENDIENTE"
                      type="button"
                    >
                      Pendiente
                    </button>
                    <button 
                      (click)="cambiarEstado(envio, EstadosEnvio.EN_TRANSITO)"
                      [disabled]="envio.estado === EstadosEnvio.EN_TRANSITO"
                      type="button"
                    >
                      En Tr√°nsito
                    </button>
                    <button 
                      (click)="cambiarEstado(envio, EstadosEnvio.ENTREGADO)"
                      [disabled]="envio.estado === EstadosEnvio.ENTREGADO"
                      type="button"
                    >
                      Entregado
                    </button>
                    <button 
                      (click)="cambiarEstado(envio, EstadosEnvio.CANCELADO)"
                      [disabled]="envio.estado === EstadosEnvio.CANCELADO"
                      type="button"
                    >
                      Cancelado
                    </button>
                  </div>
                </div>
                
                <button 
                  class="btn-icon btn-delete"
                  (click)="deleteEnvio(envio)"
                  *ngIf="canDeleteEnvio(envio)"
                  title="Eliminar"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </td>
          </tr>
          <tr *ngIf="filteredEnvios.length === 0">
            <td colspan="10" class="no-data">
              <i class="fas fa-inbox"></i>
              <p>No se encontraron env√≠os</p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="pagination" *ngIf="totalPages > 1">
      <button 
        class="btn btn-secondary"
        (click)="previousPage()"
        [disabled]="currentPage === 1"
      >
        <i class="fas fa-chevron-left"></i>
        Anterior
      </button>
      
      <span class="pagination-info">
        P√°gina {{ currentPage }} de {{ totalPages }}
      </span>
      
      <button 
        class="btn btn-secondary"
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
      >
        Siguiente
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
    </div>
  </div>
</div>

<!-- Modal Create/Edit -->
<div class="modal-overlay" *ngIf="showModal">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>
        <i class="fas fa-truck"></i>
        {{ editingEnvio ? 'Editar Env√≠o' : 'Nuevo Env√≠o' }}
      </h3>
      <button class="btn-close" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <form [formGroup]="envioForm" (ngSubmit)="onSubmit()">
      <div class="modal-body">
        <!-- Informaci√≥n del Env√≠o -->
        <div class="form-section">
          <h4 class="section-title">
            <i class="fas fa-info-circle"></i>
            Informaci√≥n del Env√≠o
          </h4>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">
                <i class="fas fa-barcode"></i>
                HAWB <span class="required">*</span>
                <span class="hawb-auto-badge" *ngIf="!editingEnvio">
                  <i class="fas fa-magic"></i>
                  Auto-generado
                </span>
              </label>
              <input 
                type="text"
                formControlName="hawb"
                class="form-control hawb-input"
                [placeholder]="editingEnvio ? 'Ej: HAW123456' : 'Se generar√° autom√°ticamente'"
                [class.error]="envioForm.get('hawb')?.invalid && envioForm.get('hawb')?.touched"
                [readonly]="!editingEnvio"
              >
              <div class="error-message" *ngIf="envioForm.get('hawb')?.invalid && envioForm.get('hawb')?.touched">
                El HAWB es requerido
              </div>
              <small class="hawb-help-text" *ngIf="!editingEnvio">
                <i class="fas fa-info-circle"></i>
                El n√∫mero de registro se asigna autom√°ticamente en secuencia. Puede visualizarlo antes de guardar.
              </small>
            </div>

            <div class="form-group">
              <label class="form-label">
                Comprador <span class="required">*</span>
              </label>
              <select 
                formControlName="comprador"
                class="form-control"
                [class.error]="envioForm.get('comprador')?.invalid && envioForm.get('comprador')?.touched"
              >
                <option value="">Seleccione un comprador</option>
                <option *ngFor="let comprador of compradores" [value]="comprador.id">
                  {{ comprador.nombre }} - {{ comprador.cedula }}
                </option>
              </select>
              <div class="error-message" *ngIf="envioForm.get('comprador')?.invalid && envioForm.get('comprador')?.touched">
                Debe seleccionar un comprador
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                Estado <span class="required">*</span>
              </label>
              <select 
                formControlName="estado"
                class="form-control"
              >
                <option [value]="EstadosEnvio.PENDIENTE">Pendiente</option>
                <option [value]="EstadosEnvio.EN_TRANSITO">En Tr√°nsito</option>
                <option [value]="EstadosEnvio.ENTREGADO">Entregado</option>
                <option [value]="EstadosEnvio.CANCELADO">Cancelado</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">
              Observaciones
            </label>
            <textarea 
              formControlName="observaciones"
              class="form-control"
              rows="3"
              placeholder="Observaciones adicionales..."
            ></textarea>
          </div>
        </div>

        <!-- Productos -->
        <div class="form-section">
          <div class="section-header">
            <h4 class="section-title">
              <i class="fas fa-box"></i>
              Productos
            </h4>
            <button 
              type="button"
              class="btn btn-secondary btn-sm"
              (click)="addProducto()"
            >
              <i class="fas fa-plus"></i>
              Agregar Producto
            </button>
          </div>

          <div class="productos-list" formArrayName="productos">
            <div 
              *ngFor="let producto of productos.controls; let i = index" 
              [formGroupName]="i"
              class="producto-item"
            >
              <div class="producto-header">
                <span class="producto-number">Producto #{{ i + 1 }}</span>
                <button 
                  type="button"
                  class="btn-icon btn-delete"
                  (click)="removeProducto(i)"
                  [disabled]="productos.length === 1"
                  title="Eliminar producto"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </div>

              <!-- Selector de producto existente -->
              <div class="form-row">
                <div class="form-group" style="flex: 1;">
                  <label class="form-label">
                    <i class="fas fa-search"></i>
                    Buscar Producto Existente
                  </label>
                  <select 
                    formControlName="productoExistenteId"
                    class="form-control"
                    (change)="onProductoExistenteSelected(i, $event.target.value)"
                  >
                    <option value="">-- Crear nuevo producto --</option>
                    <option *ngFor="let prod of productosExistentes" [value]="prod.id">
                      {{ prod.descripcion }} - {{ getCategoriaLabel(prod.categoria) }}
                    </option>
                  </select>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group" style="flex: 2;">
                  <label class="form-label">
                    Descripci√≥n <span class="required">*</span>
                  </label>
                  <input 
                    type="text"
                    formControlName="descripcion"
                    class="form-control"
                    placeholder="Descripci√≥n del producto"
                  >
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <i [class]="'fas ' + getCategoriaIcon(producto.get('categoria')?.value || '')"></i>
                    Categor√≠a <span class="required">*</span>
                  </label>
                  <select 
                    formControlName="categoria"
                    class="form-control"
                  >
                    <option value="">Seleccionar</option>
                    <option [value]="CategoriasProducto.ELECTRONICA">üì± Electr√≥nica</option>
                    <option [value]="CategoriasProducto.ROPA">üëï Ropa</option>
                    <option [value]="CategoriasProducto.HOGAR">üè† Hogar</option>
                    <option [value]="CategoriasProducto.DEPORTES">‚öΩ Deportes</option>
                    <option [value]="CategoriasProducto.OTROS">üì¶ Otros</option>
                  </select>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label class="form-label">
                    Peso (kg) <span class="required">*</span>
                  </label>
                  <input 
                    type="number"
                    formControlName="peso"
                    class="form-control"
                    min="0.01"
                    step="0.01"
                    placeholder="0.00"
                  >
                </div>

                <div class="form-group">
                  <label class="form-label">
                    Cantidad <span class="required">*</span>
                  </label>
                  <input 
                    type="number"
                    formControlName="cantidad"
                    class="form-control"
                    min="1"
                    placeholder="1"
                  >
                </div>

                <div class="form-group">
                  <label class="form-label">
                    Valor Unitario ($) <span class="required">*</span>
                  </label>
                  <input 
                    type="number"
                    formControlName="valor"
                    class="form-control"
                    min="0"
                    step="0.01"
                    placeholder="0.00"
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- Totales -->
          <div class="totales-section">
            <div class="totales-grid">
              <div class="total-item">
                <span class="total-label">
                  <i class="fas fa-boxes"></i>
                  Total Productos:
                </span>
                <span class="total-value">{{ totalCantidad }}</span>
              </div>
              <div class="total-item">
                <span class="total-label">
                  <i class="fas fa-weight-hanging"></i>
                  Peso Total:
                </span>
                <span class="total-value">{{ totalPeso | number:'1.2-2' }} kg</span>
              </div>
              <div class="total-item">
                <span class="total-label">
                  <i class="fas fa-tag"></i>
                  Valor Total Productos:
                </span>
                <span class="total-value">{{ totalValor | currency:'USD':'symbol':'1.2-2' }}</span>
              </div>
              <div class="total-item total-costo-servicio">
                <div class="costo-servicio-header">
                  <span class="total-label">
                    <i class="fas fa-shipping-fast"></i>
                    Costo de Servicio:
                  </span>
                  <span class="total-value">
                    <span *ngIf="calculandoCosto" class="loading-inline">
                      <i class="fas fa-spinner fa-spin"></i> Calculando...
                    </span>
                    <span *ngIf="!calculandoCosto">{{ costoServicioCalculado | currency:'USD':'symbol':'1.2-2' }}</span>
                  </span>
                </div>
                
                <!-- Desglose de costos -->
                <div class="costos-detalle" *ngIf="!calculandoCosto && detallesCostos.length > 0">
                  <div class="costos-detalle-title">
                    <i class="fas fa-list-ul"></i>
                    Desglose por categor√≠a:
                  </div>
                  <div class="costo-detalle-item" *ngFor="let detalle of detallesCostos">
                    <div class="costo-detalle-categoria">
                      <i [class]="'fas ' + getCategoriaIcon(detalle.categoria)"></i>
                      <div>
                        <div>{{ getCategoriaLabel(detalle.categoria) }}</div>
                        <div class="costo-detalle-info" *ngIf="detalle.tarifa">
                          {{ detalle.cantidad }} √ó {{ detalle.peso }} kg = {{ detalle.costo_unitario | currency:'USD':'symbol':'1.2-2' }}/unidad
                        </div>
                        <div class="costo-detalle-info text-error" *ngIf="detalle.error">
                          {{ detalle.error }}
                        </div>
                      </div>
                    </div>
                    <div class="costo-detalle-valor">
                      {{ detalle.costo_total | currency:'USD':'symbol':'1.2-2' }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="total-final" *ngIf="costoServicioCalculado > 0">
              <span class="total-label">
                <i class="fas fa-calculator"></i>
                Total General (Productos + Env√≠o):
              </span>
              <span class="total-value-final">{{ (totalValor + costoServicioCalculado) | currency:'USD':'symbol':'1.2-2' }}</span>
            </div>
          </div>
        </div>

        <!-- Error Message -->
        <div class="alert alert-error" *ngIf="errorMessage">
          <i class="fas fa-exclamation-circle"></i>
          {{ errorMessage }}
        </div>
      </div>

      <div class="modal-footer">
        <button 
          type="button"
          class="btn btn-secondary"
          (click)="closeModal()"
          [disabled]="submitting"
        >
          Cancelar
        </button>
        <button 
          type="submit"
          class="btn btn-primary"
          [disabled]="!envioForm.valid || submitting"
        >
          <i class="fas fa-spinner fa-spin" *ngIf="submitting"></i>
          <i class="fas fa-save" *ngIf="!submitting"></i>
          {{ submitting ? 'Guardando...' : (editingEnvio ? 'Actualizar' : 'Crear') }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Modal Detail -->
<div class="modal-overlay" *ngIf="showDetailModal" (click)="closeDetailModal()">
  <div class="modal-content modal-large" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>
        <i class="fas fa-file-alt"></i>
        Detalle del Env√≠o
      </h3>
      <button class="btn-close" (click)="closeDetailModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="modal-body" *ngIf="selectedEnvio">
      <!-- Informaci√≥n General -->
      <div class="detail-section">
        <h4 class="section-title">
          <i class="fas fa-info-circle"></i>
          Informaci√≥n General
        </h4>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">HAWB:</span>
            <span class="detail-value">{{ selectedEnvio.hawb }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Estado:</span>
            <span class="badge" [ngClass]="getEstadoClass(selectedEnvio.estado)">
              {{ getEstadoLabel(selectedEnvio.estado) }}
            </span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Fecha de Emisi√≥n:</span>
            <span class="detail-value">{{ selectedEnvio.fecha_emision | date:'dd/MM/yyyy HH:mm' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Fecha de Creaci√≥n:</span>
            <span class="detail-value">{{ selectedEnvio.fecha_creacion | date:'dd/MM/yyyy HH:mm' }}</span>
          </div>
        </div>
      </div>

      <!-- Informaci√≥n del Comprador -->
      <div class="detail-section">
        <h4 class="section-title">
          <i class="fas fa-user"></i>
          Comprador
        </h4>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">Nombre:</span>
            <span class="detail-value">{{ selectedEnvio.comprador_info?.nombre }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">C√©dula:</span>
            <span class="detail-value">{{ selectedEnvio.comprador_info?.cedula }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Correo:</span>
            <span class="detail-value">{{ selectedEnvio.comprador_info?.correo }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Tel√©fono:</span>
            <span class="detail-value">{{ selectedEnvio.comprador_info?.telefono || 'N/A' }}</span>
          </div>
        </div>
      </div>

      <!-- Productos -->
      <div class="detail-section">
        <h4 class="section-title">
          <i class="fas fa-box"></i>
          Productos ({{ selectedEnvio.productos?.length || 0 }})
        </h4>
        <div class="productos-detail-list">
          <div 
            *ngFor="let producto of selectedEnvio.productos; let i = index" 
            class="producto-detail-item"
          >
            <div class="producto-detail-header">
              <span class="producto-number">#{{ i + 1 }}</span>
              <span class="badge badge-categoria">
                <i [class]="'fas ' + getCategoriaIcon(producto.categoria)"></i>
                {{ getCategoriaLabel(producto.categoria) }}
              </span>
            </div>
            <div class="producto-detail-body">
              <p class="producto-descripcion">{{ producto.descripcion }}</p>
              <div class="producto-detail-stats">
                <div class="stat">
                  <i class="fas fa-weight"></i>
                  <span>Peso: {{ producto.peso }} kg √ó {{ producto.cantidad }} = <strong>{{ producto.peso * producto.cantidad | number:'1.2-2' }} kg</strong></span>
                </div>
                <div class="stat">
                  <i class="fas fa-dollar-sign"></i>
                  <span>Valor: {{ producto.valor | currency:'USD':'symbol':'1.2-2' }} √ó {{ producto.cantidad }} = <strong>{{ (producto.valor * producto.cantidad) | currency:'USD':'symbol':'1.2-2' }}</strong></span>
                </div>
                <div class="stat" *ngIf="producto.costo_envio">
                  <i class="fas fa-shipping-fast"></i>
                  <span>Costo Env√≠o: <strong>{{ producto.costo_envio | currency:'USD':'symbol':'1.2-2' }}</strong></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Totales -->
      <div class="detail-section totales-section-detail">
        <div class="total-item-detail">
          <span class="total-label-detail">
            <i class="fas fa-boxes"></i>
            Total Productos:
          </span>
          <span class="total-value-detail">{{ selectedEnvio.cantidad_total }}</span>
        </div>
        <div class="total-item-detail">
          <span class="total-label-detail">
            <i class="fas fa-weight-hanging"></i>
            Peso Total:
          </span>
          <span class="total-value-detail">{{ selectedEnvio.peso_total | number:'1.2-2' }} kg</span>
        </div>
        <div class="total-item-detail">
          <span class="total-label-detail">
            <i class="fas fa-tag"></i>
            Valor Productos:
          </span>
          <span class="total-value-detail">{{ selectedEnvio.valor_total | currency:'USD':'symbol':'1.2-2' }}</span>
        </div>
        <div class="total-item-detail">
          <span class="total-label-detail">
            <i class="fas fa-shipping-fast"></i>
            Costo Servicio:
          </span>
          <span class="total-value-detail">{{ selectedEnvio.costo_servicio || 0 | currency:'USD':'symbol':'1.2-2' }}</span>
        </div>
        <div class="total-item-detail highlight">
          <span class="total-label-detail">
            <i class="fas fa-calculator"></i>
            Total General:
          </span>
          <span class="total-value-detail">{{ (selectedEnvio.valor_total + (selectedEnvio.costo_servicio || 0)) | currency:'USD':'symbol':'1.2-2' }}</span>
        </div>
      </div>

      <!-- Observaciones -->
      <div class="detail-section">
        <h4 class="section-title">
          <i class="fas fa-comment"></i>
          Observaciones
        </h4>
        <p class="observaciones-text" *ngIf="selectedEnvio.observaciones">
          {{ selectedEnvio.observaciones }}
        </p>
        <p class="text-muted" *ngIf="!selectedEnvio.observaciones">
          <i>No hay observaciones registradas para este env√≠o.</i>
        </p>
      </div>
    </div>

    <div class="modal-footer">
      <button 
        type="button"
        class="btn btn-secondary"
        (click)="closeDetailModal()"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>
